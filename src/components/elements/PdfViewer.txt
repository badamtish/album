import React, { useState, Component } from "react";
import { Document, Page } from "react-pdf";
import { pdfjs } from "react-pdf";
import Nischal from './Nischal (1).pdf';
import { SizeMe } from 'react-sizeme';
import { Container, Col } from "react-bootstrap";

pdfjs.GlobalWorkerOptions.workerSrc = `//cdnjs.cloudflare.com/ajax/libs/pdf.js/${pdfjs.version}/pdf.worker.js`;

export default class FileViewer extends Component {
    constructor(props) {
        super(props)
        this.state = {
            numPages: null,
            pageNumber: 1
        }
    }

    onDocumentLoadSuccess = ({ numPages }) => {
        this.setState({ numPages });
    };


    render() {
        const { pageNumber, numPages, PDFWidth } = this.state;

        return (
            <div>
                <Document
                    file={Nischal}
                    onLoadSuccess={this.onDocumentLoadSuccess}
                    style={{ width: 600 }}
                >
                    {Array.from(new Array(numPages), (el, index) => (
                        <Page key={`page_${index + 1}`} pageNumber={index + 1} width={PDFWidth} />
                    ))}
                </Document>
            </div>
            <SizeMe
                monitorHeight
                refreshRate={128}
                refreshMode={"debounce"}
                render={({ size }) => (
                    <div>
                        <Document
                            file={Nischal}
                            onLoadSuccess={this.onDocumentLoadSuccess}
                            onLoadError={this.onDocumentLoadError}
                        >
                            <div>
                                <Page width={size.width} pageNumber={pageNumber} />
                            </div>
                        </Document>
                    </div>
                )}
            />
        );
    }
}
